<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="~/css/demandes.css">
</head>
<body class="bodyAppli">
    <div>
        <h1 id="titre">Mes demandes d'action</h1>
    </div>
    <br />
    <main id="boxes">
        <div>
            <h3>Choisissez une action</h3>
            <form method="POST" id="idSelection">
                <select name="actionChoisie" id="actionChoisie">
                    @foreach (var actionBenef in ViewBag.listeActions)
                    {
                        <option value=@actionBenef.IdAction>@actionBenef.NomActivite du @actionBenef.DateAction.ToString("dd/MM/yyyy")</option>
                    }
                </select>
                <input id="idSubmit" type="submit" value="valider" />
            </form>
        </div>
        <br />
        <div id="maLigne">
            <div id="colonne">
                <h2 id="h2">Détail </h2>
                <br />
                <br />
                @if (ViewBag.detailAction != null)
                {
                    <table id="table1">
                        <tr>
                            <td>Activité :</td>
                            <td>@ViewBag.detailAction.NomActivite</td>
                        </tr>
                        <tr>
                            <td>Date :</td>
                            @if (@ViewBag.detailAction.MinDebut == 0)
                            {
                                <td>le @ViewBag.detailAction.DateAction.ToString("dd/MM/yyyy") de @ViewBag.detailAction.HeureDebut H @ViewBag.detailAction.MinDebut à @ViewBag.detailAction.HeureFin H 00</td>
                            }
                            else
                            {
                                <td>le @ViewBag.detailAction.DateAction.ToString("dd/MM/yyyy") de @ViewBag.detailAction.HeureDebut H @ViewBag.detailAction.MinDebut à @ViewBag.detailAction.HeureFin H 00</td>
                            }
                        </tr>
                        <tr>
                            <td>Matériel :</td>
                            <td>@ViewBag.detailAction.Materiel</td>
                        </tr>
                    </table>
                }
                @if (ViewBag.detailBenevole != null)
                {
                    @if (ViewBag.detailBenevole.NomUtil != null)
                    {
                        <table id="table1">
                            <tr>
                                <td>Bénévole :</td>
                                <td>@ViewBag.detailBenevole.NomUtil @ViewBag.detailBenevole.PrenomUtil</td>
                            </tr>
                            <tr>
                                <td>E-mail :</td>
                                <td>@ViewBag.detailBenevole.EmailUtil</td>
                            </tr>
                            <tr>
                                <td>Tel :</td>
                                <td>@ViewBag.detailBenevole.TelUtil</td>
                            </tr>
                            <tr>
                                <td>Contact d'urgence :</td>
                                <td>@ViewBag.detailBenevole.NomContactUrgence @ViewBag.detailBenevole.PrenomContactUrgence</td>
                            </tr>
                            <tr>
                                <td>Tel contact d'urgence :</td>
                                <td>@ViewBag.detailBenevole.TelContactUrgence</td>
                            </tr>
                        </table>
                    }
                }
                <br />
                <input class="btnSelect" type="button" value="annuler" />
                <script>
                </script>
            </div>


            <div id="colonne">
                <h2 id="h2">Reponses</h2>
                <br />
                <br />
                <div id="sousColonne">
                    <table id="table2">
                        <tr>
                            @if (ViewBag.lesReponses != null)
                            {
                                @for (int i = 0; i < ViewBag.lesReponses.Count; i++)
                                {
                                    
                                    <div class="description">
                                        <p>Date Reponse : @ViewBag.lesReponses[i].DateReponse.ToString("dd-MM-yyyy")</p>
                                        <p>Volontaire : @ViewBag.lesReponses[i].PrenomVolontaire @ViewBag.lesReponses[i].NomVolontaire ( @ViewBag.lesReponses[i].Age ) </p>
                                        @if((string)ViewBag.effectueActivite[i] != "")
                                        {
                                            <p>Dernier service : @ViewBag.effectueActivite[i].ToString() le @ViewBag.effectueDate[i].ToString("dd/MM/yyyy")</p>
                                        } else
                                        {
                                            <p>volontaire non rencontré</p>
                                        }
                                    </div>
                                }
                            }
                        </tr>
                    </table>
                </div>
                <input class="btnSelect" type="button" value="choisir bénévole" />
                <br />
                <script>
                    function myFunction(x) {
                        alert("Row index is: " + x.rowIndex);
                    }
                </script>
            </div>
        </div>
    </main> 
</body>
</html>